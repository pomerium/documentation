# redirects will process the first matching rule it finds, reading from top to bottom.
# https://docs.netlify.com/routing/redirects/

# Configuration & Settings Reference (reference links redirect correctly)
/docs/reference/reference /docs/reference
/docs/reference/reference.html /docs/reference
/docs/configuration/ /docs/reference
/docs/config-reference.html /docs/reference
/configuration/ /docs/reference

# Community links (community links redirect correctly)
/community/ /docs/community/
/community/index.html /docs/community/
/community/contributing /docs/community/contributing
/community/contributing.html /docs/community/contributing
/community/code-of-conduct /docs/community/code-of-conduct
/community/code-of-conduct.html /docs/community/code-of-conduct
/community/security /docs/internals/security
/community/security.html /docs/internals/security
/docs/community/security /docs/internals/security
/docs/security /docs/internals/security
/docs/security.html /docs/internals/security
/docs/community/security.html /docs/internals/security

# Guide and examples links
/guide/ /docs/quick-start/
/guide/kubernetes.html /docs/k8s
/guide/kubernetes /docs/k8s
/docs/k8s /docs/deploying/k8s/quickstart
/guide/synology /docs/guides/synology
/guide/synology.html /docs/guides/synology
/docs/quick-start/synology.html /docs/guides/synology

/docs/examples.html /docs/guides
/docs/examples /docs/guides

# 301 deprecated guides in v21 to v20 guides
/docs/guides/nginx https://0-20-0.docs.pomerium.com/docs/guides/nginx 301!
/docs/guides/traefik-ingress https://0-20-0.docs.pomerium.com/docs/guides/traefik-ingress 301!
/docs/guides/traefik-ingress.html https://0-20-0.docs.pomerium.com/docs/guides/traefik-ingress 301!
/guides/traefik-ingress.html https://0-20-0.docs.pomerium.com/docs/guides/traefik-ingress 301!
/docs/reference/forward-auth https://0-20-0.docs.pomerium.com/docs/reference/forward-auth 301!
https://0-20-0.docs.pomerium.com/category/guides https://0-20-0.docs.pomerium.com/docs/guides

# /guides/ redirects to capabilities pages
/docs/guides/enroll-device /docs/capabilities/device-identity
/docs/guides/enroll-device.html /docs/capabilities/device-identity
/docs/guides/admin-enroll-device.html /docs/capabilities/device-identity
/docs/guides/admin-enroll-device /docs/capabilities/device-identity
/docs/guides/mtls /docs/capabilities/mtls-clients
/docs/guides/mtls.html /docs/capabilities/mtls-clients
/docs/guides/upstream-mtls /docs/capabilities/mtls-services
/docs/guides/upstream-mtls.html /docs/capabilities/mtls-services
/guides/tcp /docs/capabilities/tcp

# More docs guides redirects
/recipes/* /docs/guides/:splat
/category/guides /docs/guides

# /guides/ splat
/guides/* /docs/guides/:splat
/docs/guides/tcp /docs/guides/securing-tcp
/docs/guides/tcp.html /docs/guides/securing-tcp
/guides/vs-code-server.html /docs/guides/code-server
/guides/local-oidc.html /docs/guides/local-oidc

# Reference, capabilities, topics, concepts links
/docs/reference/readme.html /docs/
/docs/concepts/namespacing /docs/capabilities/namespacing
# Redirects incorrectly
/docs/reference/certificates.html /docs/topics/certificates
/docs/topics/certificates /docs/concepts/certificates

# This link requires multiple redirects
/docs/reference/data-storage.html /docs/topics/data-storage
/docs/topics/data-storage /docs/concepts/data-storage
/docs/concepts/data-storage /docs/internals/data-storage
/docs/topics/data-storage.html /docs/internals/data-storage

# This link requires multiple redirects
/docs/reference/getting-users-identity.html /docs/topics/getting-users-identity
/docs/topics/getting-users-identity /docs/concepts/getting-users-identity
/docs/concepts/getting-users-identity /docs/capabilities/getting-users-identity

/docs/topics/getting-users-identity.html /docs/capabilities/getting-users-identity
# This link requires multiple redirects
/docs/reference/production-deployment.html /docs/topics/production-deployment
/docs/topics/production-deployment /docs/deploying/production-deployment

/docs/topics/production-deployment.html /docs/deploying/production-deployment
/docs/production-deployment /docs/deploying/production-deployment
/docs/production-deployment.html /docs/deploying/production-deployment
/docs/production/security /docs/deploying/production-deployment
/docs/production/production-deployment /docs/deploying/production-deployment

# This links requires multiple redirects
/docs/reference/programmatic-access.html /docs/topics/programmatic-access
/docs/topics/programmatic-access /docs/concepts/programmatic-access
/docs/concepts/programmatic-access /docs/capabilities/programmatic-access

/docs/topics/programmatic-access.html /docs/capabilities/programmatic-access


# Blog posts
/posts/2020/06/01/release-0-9/ /blog/posts-2020-06-01-release-0-9/
/posts/2020/05/11/release-0-8/ /blog/announcing-pomerium-0-8/
/posts/2020/04/16/release-0-7/ /blog/announcing-pomerium-0-7/
/blog/tag/releases /blog
/blog/tag/tcp /blog
/blog/tag/kubernetes /blog
/blog/tag/istio /blog
/blog/author/pomerium/feed /blog
# Careers
/jobs/ /careers/
/jobs/Frontend-Engineer.html /careers/frontend-engineer/
/jobs/Backend-Engineer.html /careers/backend-engineer/

# Redirects enterprise links
/enterprise/ /docs/enterprise
/docs/enterprise /docs/enterprise
/enterprise/service-accounts/ /docs/capabilities/service-accounts
/enterprise/service-accounts.html /docs/capabilities/service-accounts
/enterprise/prometheus.html /docs/capabilities/metrics
/enterprise/prometheus /docs/capabilities/metrics
/docs/enterprise/reference/ /docs/enterprise/configure
/docs/enterprise/reference/configure /docs/enterprise/configure
/docs/enterprise/reference/configure.html /docs/enterprise/configure
/docs/enterprise/reference/config /docs/enterprise/configure
/docs/enterprise/reference/config.html /docs/enterprise/configure
/enterprise/reference/configure.html /docs/enterprise/configure
/enterprise/reference/config.html /docs/enterprise/configure
/enterprise/concepts.html /docs/concepts/access-control
# /docs/enterprise uses multiple redirects
/docs/enterprise /docs/releases/enterprise
/docs/releases/enterprise /docs/enterprise
/docs/enterprise.html /docs/enterprise
/enterprise/reference/reports.html /docs/capabilities/reports

/enterprise/install/helm.html /docs/enterprise/install/helm
/enterprise/* /docs/enterprise/:splat

#  Installation and deployment methods redirects
/docs/installation.html /docs/install
/docs/installation /docs/install
# /docs/quick-start uses multiple redirects
/docs/quick-start /docs/install
/docs/install/ /docs/quickstart

# /docs/quick-start/binary.html uses multiple redirects
/docs/quick-start/binary.html /docs/install/binary
/docs/install/binary /docs/pomerium-core/core

# /docs/quick-start/binary uses multiple redirects
/docs/quick-start/binary /docs/install/binary
/docs/install/binary /docs/pomerium-core/core
/docs/pomerium-core/core /docs/deploying/binary

/docs/install/binary.html /docs/deploying/binary

# Helm links
/docs/quick-start/helm.html /docs/k8s/helm
/docs/k8s/helm /docs/guides/helm
/docs/enterprise/install/helm /docs/guides/helm

# /docs/install/helm.html uses multiple redirects
/docs/install/helm.html /docs/k8s/helm
/docs/k8s/helm /docs/guides/helm

/docs/k8s/helm.html /docs/guides/helm
/docs/install/helm /docs/enterprise/install/helm
/docs/k8s/quickstart /docs/deploying/k8s/quickstart

# From-source links
/docs/quick-start/from-source.html /docs/install/from-source
/docs/install/from-source /docs/deploying/from-source
/docs/install/from-source.html /docs/deploying/from-source

# Enterprise and Core quickstarts
/docs/install/quickstart /docs/quickstart
/docs/enterprise/quickstart /docs/enterprise/quickstart
/docs/enterprise/quickstart.html /docs/enterprise/quickstart
/docs/enterprise/install /docs/enterprise/quickstart
/enterprise/install/ /docs/enterprise/quickstart

/docs/enterprise/concepts /docs/capabilities/authentication
/docs/enterprise/concepts.html /docs/capabilities/authentication
/docs/enterprise/reference/manage /docs/capabilities/authentication
/docs/enterprise/reference/manage.html /docs/capabilities/authentication
/docs/enterprise/reference/reports /docs/capabilities/reports
/docs/enterprise/external-data /docs/integrations/
/docs/enterprise/branding /docs/capabilities/branding
/docs/enterprise/branding/logo /docs/capabilities/branding
/docs/enterprise/branding/colors /docs/capabilities/branding
/docs/enterprise/api.html /docs/capabilities/enterprise-api
/docs/enterprise/api /docs/capabilities/enterprise-api

# redirects all /docs/enterprise/identity-providers to /docs/identity-providers
/docs/enterprise/identity-providers/* /docs/identity-providers/:splat

#redirects /docs/enterprise/external-data/* to /docs/integrations/
/docs/enterprise/external-data/* /docs/integrations/:splat

# TCP links

# /docs/topics/tcp-support.html uses multiple redirects
/docs/topics/tcp-support.html /docs/tcp/
/docs/tcp /docs/capabilities/tcp
# multiple redirects
/docs/topics/tcp-support /docs/tcp/
/docs/tcp /docs/capabilities/tcp


# /docs/client.html uses multiple redirects
/docs/client.html /docs/tcp/client
/docs/tcp/client.html /docs/capabilities/tcp/client
/docs/tcp/client /docs/capabilities/tcp/client

/docs/capabilities/tcp/reference/tcp-cli-reference /docs/capabilities/tcp/reference

# splats
/docs/tcp/examples/* /docs/capabilities/tcp/examples/:splat
/docs/tcp/* /docs/capabilities/tcp/examples/:splat

# Enterprise metrics links
/docs/enterprise/metrics.html /docs/capabilities/metrics
/docs/enterprise/metrics /docs/capabilities/metrics

# redirects /examples/ links
# /examples/js-sdk/express-server 404s
/examples/js-sdk/express-server /docs/capabilities/jwt-verification

# Kubernetes links
# /docs/topics/kubernetes-integration.html uses multiple redirects
/docs/topics/kubernetes-integration.html /docs/k8s/
/docs/k8s /docs/deploying/k8s/quickstart
/docs/k8s/reference /docs/deploying/k8s/reference
/docs/k8s/ingress /docs/deploying/k8s/ingress
/docs/k8s/ingress.html /docs/deploying/k8s/ingress
/docs/k8s/install /docs/deploying/k8s/install

/docs/k8s/configure /docs/deploying/k8s/configure
/docs/topics/kubernetes-integration /docs/deploying/k8s/quickstart
/docs/topics/ingress /docs/deploying/k8s/ingress
# Still 404s...
/kubernetes/ /docs/deploying/k8s/quickstart

# Troubleshooting and FAQs
/docs/FAQ.html /docs/troubleshooting
/docs/troubleshooting /docs/internals/troubleshooting
/docs/troubleshooting.html /docs/internals/troubleshooting
/docs/faq /docs/internals/troubleshooting

# /docs/glossary.html uses multiple redirects
/docs/glossary.html /docs/overview/glossary
/docs/overview/glossary /docs/internals/glossary


# Releases and upgrading guides
# /docs/releases.html has multiple redirects
/docs/releases.html /docs/overview/releases
/docs/overview/releases /docs/releases
# /docs/architecture.html has multiple redirects
/docs/architecture.html /docs/overview/architecture
/docs/overview/architecture /docs/internals/architecture

/docs/architecture /docs/internals/architecture
# /docs/background.html has multiple redirects
/docs/background.html /docs/overview/background
/docs/overview/background /docs/concepts/zero-trust

/docs/upgrading.html /docs/overview/upgrading
/docs/upgrading /docs/pomerium-core/upgrading
# /docs/changelog.html has multiple redirects
/docs/changelog.html /docs/overview/changelog
/docs/overview/changelog /docs/releases/changelog
# /docs/changelog has multiple redirects
/docs/changelog /docs/overview/changelog
/docs/overview/changelog /docs/releases/changelog
# Redirects are case sensitive https://answers.netlify.com/t/case-sensitivity-with-redirects/956/2
/docs/CHANGELOG /docs/releases/changelog

/docs/reference/identity-provider-service-account /docs/pomerium-core/upgrading
/reference/ /docs/reference/
/reference/* /docs/reference/:splat

# Topics links - now concepts
/docs/topics/auth-logs /docs/capabilities/audit-logs
/docs/topics/single-sign-out.html /docs/capabilities/single-sign-out
/docs/topics/single-sign-out /docs/capabilities/single-sign-out

#redirects topics
# /docs/topics/orc.html uses multiple redirects - still 404s
/docs/topics/original-request-context.html /docs/concepts/original-request-context
/docs/concepts/original-request-context /docs/capabilities/original-request-context

/docs/topics/load-balancing.html /docs/capabilities/routing
/docs/topics/certificates /docs/concepts/certificates
/docs/certificates.html /docs/concepts/certificates

# multiple redirects - still 404s
/docs/topics/impersonation.html /docs/concepts/impersonation
/docs/concepts/impersonation /docs/capabilities/service-accounts

/docs/topics/ /docs/concepts/access-control
/docs/topics/* /docs/concepts/:splat 301!
/docs/topics/device-identity /docs/concepts/device-identity
/docs/topics/mutual-auth /docs/concepts/mutual-auth

# multiple redirects
/docs/topics/original-request-context /docs/concepts/original-request-context
/docs/concepts/original-request-context /docs/capabilities/original-request-context
# multiple redirects
/docs/topics/ppl /docs/concepts/ppl
/docs/concepts/ppl /docs/capabilities/ppl
# multiple redirects
/docs/topics/ppl.html /docs/concepts/ppl.html
/docs/concepts/ppl.html /docs/capabilities/ppl.html
# multiple redirects
/docs/topics/load-balancing /docs/concepts/load-balancing
/docs/concepts/load-balancing /docs/capabilities/routing

# flattened the changelog, and upgrading guide
/docs/overview/upgrading/archive  /docs/overview/upgrading
/docs/overview/changelog/archive  /docs/overview/upgrading
/docs/overview/upgrading /docs/pomerium-core/upgrading
/enterprise/changelog /docs/releases/enterprise/changelog
/docs/enterprise/changelog /docs/releases/enterprise/changelog
/docs/enterprise/changelog.html /docs/releases/enterprise/changelog

# domain
# redirect all the `.io` domains to `com` for latest docs
http://docs.pomerium.io/* https://docs.pomerium.com/:splat 301!
https://docs.pomerium.io/* https://docs.pomerium.com/:splat 301!

https://0-16-0.docs.pomerium.io/ https://0-16-0.docs.pomerium.com/:splat 301!
https://0-15-0.docs.pomerium.io/ https://0-15-0.docs.pomerium.com/:splat 301!
https://0-14-0.docs.pomerium.io/ https://0-14-0.docs.pomerium.com/:splat 301!
https://0-13-0.docs.pomerium.io/ https://0-13-0.docs.pomerium.com/:splat 301!
https://0-12-0.docs.pomerium.io/ https://0-12-0.docs.pomerium.com/:splat 301!
https://0-11-0.docs.pomerium.io/ https://0-11-0.docs.pomerium.com/:splat 301!
https://0-10-0.docs.pomerium.io/ https://0-10-0.docs.pomerium.com/:splat 301!
