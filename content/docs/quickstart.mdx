---
# cSpell:ignore thisisunsafe, genkey, noout

title: Run Pomerium Core With Docker
lang: en-US
sidebar_label: Quickstart
pagination_prev: null
pagination_next: null
description: Get Pomerium up and running quickly with Docker.
keywords:
  [
    pomerium,
    identity access proxy,
    oidc,
    docker,
    reverse proxy,
    containers,
    identity aware proxy,
    quickstart pomerium,
    docker,
    docker-compose,
  ]
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Pomerium Zero Quickstart

In this Quickstart, you'll install Pomerium Zero in a Docker container, and secure access to two upstream services.

## Before you start

- Install [Docker](https://docs.docker.com/install/) and [Docker Compose](https://docs.docker.com/compose/install/)
- Create a [**Pomerium Zero account**](https://console.pomerium.app/create-account)

## Get Pomerium Zero configuration

In the onboarding console, select the **Docker** tab and copy the Docker Compose configuration.

Paste the configuration in a `docker-compose.yaml` file:

```yaml title="docker-compose.yaml" {8,15} showLineNumbers
services:
  pomerium:
    image: pomerium/pomerium:v0.25.1
    ports:
      - 443:443
    restart: always
    environment:
      POMERIUM_ZERO_TOKEN: <CLUSTER_TOKEN>
      XDG_CACHE_HOME: /var/cache
    volumes:
      - pomerium-cache:/var/cache
    networks:
      main:
        aliases:
        - verify.<CLUSTER_STARTER_SUBDOMAIN>.pomerium.app
  verify:
    image: cr.pomerium.com/pomerium/verify:latest
    networks:
      main:
        aliases:
        - verify

networks:
  main: {}

volumes:
  pomerium-cache:
```

Replace the following values:

- **Line 8**: Replace `CLUSTER_TOKEN` with the cluster token generated for you in the onboarding config
- **Line 15**: Replace `CLUSTER_STARTER_SUBDOMAIN` with your generated starter subdomain

:::info

See the **Clusters Concepts** page for more information about how clusters work in Pomerium Zero.

:::

## Run Docker Compose

```bash
docker compose up -d
```

After you install and run your cluster, Pomerium Zero will attempt to detect the cluster's IP address. Because your cluster is running in an isolated Docker container with its own IP address, it won't be able to connect.

## Apply override IP address

To connect Pomerium Zero to your cluster, you need to enter a custom IP address to override your detected one.

Since we're using Docker, you should enter `127.0.0.1`.  You can also enter your preferred listening port.

Select **Apply** to connect to your cluster:

![Connecting to the Pomerium Zero cluster instance in the onboarding screen](./img/quickstart/pz-quickstart-connection-ping.png)

Once you've connected, select **Finish**.

## Connect to upstream services

In the Zero Console, we've provisioned two starter routes, **SSH** and **Verify**, that come with their own DNS records and TLS certificates:

![Viewing the two starter routes](./img/quickstart/pz-quickstart-routes.png)

### Connect to SSH

In a terminal, enter the following command and replace `YOUR_CLUSTER_DOMAIN_NAME` with your own:

```bash
pomerium-cli tcp ssh.<YOUR_CLUSTER_DOMAIN_NAME>.app:22
```

A successful request results in a response similar to the one below:

```shell-session
$ pomerium-cli tcp ssh.dominant-cowbird-8176.pomerium.app:22
2024/03/25 16:18:45 listening on 127.0.0.1:52541
```

:::note

If you haven't, install [**Pomerium CLI**](/docs/deploy/clients/pomerium-cli) with any of the following methods:

<Tabs>
<TabItem value="docker" label="Docker">

```bash
docker run cr.pomerium.com/pomerium/cli:latest
```

</TabItem>
<TabItem value="yum" label="Yum">

```bash
[pomerium-pomerium]
name=pomerium-pomerium
baseurl=https://dl.cloudsmith.io/public/pomerium/pomerium/rpm/el/$releasever/$basearch
repo_gpgcheck=1
enabled=1
gpgkey=https://dl.cloudsmith.io/public/pomerium/pomerium/gpg.6E388440B94E1407.key
gpgcheck=1
sslverify=1
pkg_gpgcheck=1
```

</TabItem>
<TabItem value="deb" label="Deb">

```bash
curl -1sLf 'https://dl.cloudsmith.io/public/pomerium/pomerium/gpg.6E388440B94E1407.key' | apt-key add -
echo "deb https://dl.cloudsmith.io/public/pomerium/pomerium/deb/debian buster main" > /etc/apt/sources.list.d/pomerium-pomerium.list
```

</TabItem>
<TabItem value="binaries" label="Binaries">

```bash
ARCH=[your arch]
OS=[your os]
VERSION=[desired version]
curl -L https://github.com/pomerium/cli/releases/download/${VERSION}/pomerium-cli-${OS}-${ARCH}.tar.gz \
    | tar -z -x
```

</TabItem>
<TabItem value="homebrew" label="Homebrew">

```bash
brew tap pomerium/tap
brew install pomerium-cli
```

</TabItem>
<TabItem value="source" label="Source">

```bash
git clone git@github.com:pomerium/cli.git
cd pomerium
make build
./bin/pomerium-cli --help
```

</TabItem>

</Tabs>

:::

### Connect to Verify

In the Zero Console, select the **From** route for the Verify app.

You should land on the Verify page:

![The homepage of the Verify app after the user is redirected](./img/quickstart/pz-identity-verified.png)

## Review authorization policy

Select the **Policies** tab. In the policies table, you'll notice the **Any Authenticated User** policy.

![Reviewing the starter policy in the Zero Console](./img/quickstart/pz-quickstart-policy.png)

This is a simple policy that instructs Pomerium to allow all requests for authenticated users or service accounts. Because you authenticated successfully against our hosted identity provider, Pomerium granted you access to both the SSH and Verify services.

:::info **Build a Policy**

Check out our **Policies** guide to learn how to build more complex policies to secure your routes.

:::

## Review certificates

Pomerium automatically provisions X.509 certificates issued by ZeroSSL to secure the starter routes in your cluster, and any routes you may build that use your assigned `pomerium.app` subdomain.

To see certificates in your cluster, go to the **Certificates** tab:

![View cluster certificates from ZeroSSL](./img/quickstart/cluster-certs.png)

:::info **Add a Certificate**

Check out the **Certificates** guide to learn how to import your own certificates to your cluster.

:::

## Next Steps

Now that you've completed the Pomerium Zero Quickstart, build your first route:

- **Pomerium Zero Fundamentals: Build Routes**
