---
id: x-forwarded-for-http-header
title: X-Forwarded-For HTTP Header
description: |
  Do not append proxy IP address to [x-forwarded-for](https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_conn_man/headers.html?highlight=skip_xff_append#x-forwarded-for).
keywords:
  - reference
  - X-Forwarded-For HTTP Header
pagination_prev: null
pagination_next: null
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# X-Forwarded-For HTTP Header

## Summary

The `X-Forwarded-For` HTTP header can be used to indicate the IP addresses through which a request has flowed on its way from the end user to an upstream service.

By default, when Pomerium receives a request it will append the IP address of its direct downstream peer to this header value, before proxying the request to the upstream service.

However, if you set the `skip_xff_append` option to true, Pomerium will not modify any incoming `X-Forwarded-For` HTTP header. Pomerium will instead pass this incoming header to the upstream service unchanged.

See the [Envoy](https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_conn_man/headers.html?highlight=skip_xff_append#x-forwarded-for) docs for more information about the `X-Forwarded-For` header.

## How to configure

<Tabs>
<TabItem value="Core" label="Core">

| **Config file keys** | **Environment variables** | **Type**  | **Default** |
| :------------------- | :------------------------ | :-------- | :---------- |
| `skip_xff_append`    | `SKIP_XFF_APPEND`         | `boolean` | `false`     |

</TabItem>
<TabItem value="Enterprise" label="Enterprise">

Configure **X-Forward-For HTTP Headers** with the toggle button in the Console. The button has three states:

- **Unset** ("-") uses the value in your configuration file
- **Checkmark** sets `skip_xff_append` to `true`
- **Empty** sets `skip_xff_append` to `false`

![Configure x-forward-for-http-headers in the console](./img/headers/x-forwarded-for-http-header.png)

</TabItem>
<TabItem value="Kubernetes" label="Kubernetes">

Kubernetes does not support `skip_xff_append`

</TabItem>
</Tabs>

### Examples

```yaml
# config file key
skip_xff_append: true

# environment variable
SKIP_XFF_APPEND=true
```
